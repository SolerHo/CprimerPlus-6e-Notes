## ## ç¬¬åå››ç«  ç»“æ„å’Œå…¶ä»–æ•°æ®å½¢å¼

### ğŸ‘‰ã€[å¤ä¹ é¢˜](./å¤ä¹ é¢˜.md)ã€‘ã€[ç¼–ç¨‹ç»ƒä¹ é¢˜](./ç¼–ç¨‹é¢˜.md)ã€‘
Cè¯­è¨€ä¸­ï¼Œæä¾›ç»“æ„å˜é‡ å¯ä»¥æé«˜è¡¨ç¤ºæ•°æ®çš„èƒ½åŠ›ï¼Œåˆ›é€ æ–°çš„å½¢å¼ã€‚

### ç¤ºä¾‹é—®é¢˜ï¼šåˆ›å»ºå›¾ä¹¦ç›®å½•
æ‰“å°å›¾ä¹¦ç›®å½•ï¼ŒåŒ…æ‹¬ï¼šä¹¦åã€ä½œè€…ã€ä»·æ ¼ã€‚
```cpp
#include<stdio.h>
#include<string.h>
char *s_gets(char * st,int n);
#define MAXTITL 41; // ä¹¦åæœ€å¤§é•¿åº¦
#define MAX AUTL 31; // ä½œè€…åå­—çš„æœ€å¤§é•¿åº¦

struct book{
    char title[MAXTITL];
    char author[MAXAUTL];
    float value;
};//ç»“æ„æ¨¡ç‰ˆç»“æŸ

int main(void)
{
    struct book library; // æŠŠlibraryå£°æ˜ä¸ºä¸€ä¸ªbookç±»å‹çš„å˜é‡
    printf("Please enter the book title.\n");
	s_gets(library.title, MAXTITL);
	printf("Now enter the author.\n");
	s_gets(library.author, MAXAUTL);
	printf("Now enter the value.\n");
	scanf("%f", &library.value);
	printf("%s by %s: $%.2f\n", library.title, library.author, library.value);
	printf("%s: \"%s\"($%.2f)\n", library.author, library.title, library.value);
	printf("Done.\n");
    
    return 0;
}

char *s_gets(char * st,int n)
{
    char * ret_val;
	char * find;
	ret_val = fgets(st, n, stdin);
	if (ret_val)  
	{
		find = strchr(st, '\n');//æŸ¥æ‰¾æ¢è¡Œç¬¦
		if (find)              //å¦‚æœåœ°å€ä¸æ˜¯NULL
			*find = '\0'; //å°†æ¢è¡Œç¬¦æ¢æˆ'\0'
		else
			while (getchar() != '\n')  //å¤„ç†è¾“å…¥è¡Œå‰©ä½™çš„å­—ç¬¦
				continue;
	}
	return ret_val;
}
```
ç»“æ„çš„3ä¸ªæŠ€å·§
> - ä¸ºç»“æ„å»ºç«‹ä¸€ä¸ªæ ¼å¼æˆ–æ ·å¼ã€‚
> - å£°æ˜ä¸€ä¸ªé€‚åˆè¯¥æ ·å¼çš„å˜é‡ã€‚
> - è®¿é—®ç»“æ„å˜é‡çš„å„ä¸ªéƒ¨åˆ†ã€‚

### 2. å»ºç«‹ç»“æ„å£°æ˜
- `ç»“æ„å£°æ˜ï¼ˆstructure declarationï¼‰`æè¿°äº†ä¸€ä¸ªç»“æ„çš„ç»„ç»‡å¸ƒå±€ã€‚

- åœ¨ç»“æ„å£°æ˜ï¼Œç”¨`ä¸€å¯¹èŠ±æ‹¬å·`æ‹¬èµ·æ¥çš„æ˜¯`ç»“æ„æˆå‘˜åˆ—è¡¨`ã€‚æ¯ä¸ªæˆå‘˜éƒ½å¯ä»¥æ˜¯ä»»æ„ä¸€ç§Cçš„æ•°æ®ç±»å‹ã€‚

- å³èŠ±æ‹¬å·åé¢çš„åˆ†å·æ˜¯å£°æ˜å¿…éœ€ï¼Œè¡¨ç¤ºç»“æ„å¸ƒå±€å®šä¹‰ç»“æŸã€‚

- ç»“æ„å£°æ˜å¯ä»¥æ”¾åœ¨æ‰€æœ‰å‡½æ•°çš„å¤–éƒ¨ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨ä¸€ä¸ªå‡½æ•°å®šä¹‰çš„å†…éƒ¨ï¼Œä½†æ˜¯å¦‚æœæŠŠå£°æ˜æ”¾åœ¨å‡½æ•°å†…éƒ¨ï¼Œå®ƒçš„æ ‡è®°åªå±€é™äºè¯¥å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚

- ç»“æ„çš„æ ‡è®°åæ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯åœ¨ä¸€å¤„å®šä¹‰ç»“æ„å¸ƒå±€ï¼Œåœ¨å¦ä¸€å¤„å®šä¹‰å®é™…çš„ç»“æ„å˜é‡ï¼Œå¿…é¡»ä½¿ç”¨æ ‡è®°ã€‚

### 3. å®šä¹‰ç»“æ„å˜é‡
ç»“æ„çš„å«ä¹‰ï¼š
> - ç»“æ„å¸ƒå±€å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•è¡¨ç¤ºæ•°æ®ï¼Œä½†ä¸è®©ç¼–è¯‘å™¨ä¸ºæ•°æ®åˆ†é…ç©ºé—´ã€‚
>
> - åˆ›å»ºå¦ä¸€ä¸ªç»“æ„å˜é‡ã€‚

#### 3.1 åˆå§‹åŒ–ç»“æ„
è®©æ¯ä¸ªæˆå‘˜çš„åˆå§‹åŒ–é¡¹ç‹¬å ä¸€è¡Œã€‚ç›®çš„ï¼šæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œå¯¹ç¼–è¯‘å™¨è€Œè¨€ï¼Œåªéœ€è¦ç”¨é€—å·åˆ†éš”å„æˆå‘˜çš„åˆå§‹åŒ–é¡¹ã€‚
- åˆå§‹åŒ–ä¸€ä¸ªç»“æ„å˜é‡ï¼ˆANSIä¹‹å‰ï¼Œä¸èƒ½è‡ªåŠ¨å˜é‡åˆå§‹åŒ–ç»“æ„ï¼ŒANSIä¹‹åå¯ä»¥ç”¨ä»»æ„å­˜å‚¨ç±»åˆ«ï¼‰ä¸åˆå§‹åŒ–æ•°ç»„çš„è¯­æ³•ç±»ä¼¼ã€‚

- ä½¿ç”¨åœ¨ä¸€å¯¹èŠ±æ‹¬å·ä¸­æ‹¬èµ·æ¥çš„åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–ï¼Œå„åˆå§‹åŒ–é¡¹ç”¨é€—å·åˆ†éš”ã€‚

**âš ï¸æ³¨æ„ï¼šåˆå§‹åŒ–ç»“æ„å’Œç±»åˆ«å­˜å‚¨æœŸ**
- å¦‚æœåˆå§‹åŒ–ä¸€ä¸ªé™æ€å­˜å‚¨æœŸçš„ç»“æ„ï¼Œåˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å€¼å¿…é¡»æ˜¯å¸¸é‡è¡¨è¾¾å¼ã€‚

- å¦‚æœæ˜¯è‡ªåŠ¨å­˜å‚¨æœŸï¼Œåˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å€¼å¯ä»¥ä¸æ˜¯å¸¸é‡ã€‚

#### 3.2 è®¿é—®ç»“æ„æˆå‘˜
- ä½¿ç”¨ç»“æ„æˆå‘˜è¿ç®—ç¬¦ â€”â€”â€”â€”> `ç‚¹(.)` è®¿é—®ç»“æ„ä¸­çš„æˆå‘˜ã€‚
```cpp
/*è®¿é—®libraryä¸­çš„titleéƒ¨åˆ†*/
library.title = "C Primer Plus";
```
- `ç‚¹(.)` æ¯” `åœ°å€ç¬¦(&)` ä¼˜å…ˆçº§é«˜ã€‚
#### 3.3 ç»“æ„çš„åˆå§‹åŒ–å™¨
- C99å’ŒC11ä¸ºç»“æ„æä¾›äº†æŒ‡å®š`åˆå§‹åŒ–å™¨ï¼ˆä¹Ÿå«æ ‡è®°åŒ–ç»“æ„åˆå§‹åŒ–è¯­æ³•ï¼‰`ï¼Œç»“æ„çš„æŒ‡å®šåˆå§‹åŒ–å™¨ä½¿ç”¨`ç‚¹è¿ç®—ç¬¦`å’Œ`æˆå‘˜åï¼ˆè€Œä¸æ˜¯æ–¹æ‹¬å·å’Œä¸‹æ ‡ï¼‰æ ‡è¯†`ç‰¹å®šçš„å…ƒç´ ã€‚
```cpp
struct book gift = {
	.price = 69.00,
	.author = "Stephen Prata",
	.title = "c primer plus"
};
```
- åœ¨æŒ‡å®šåˆå§‹åŒ–å™¨åé¢çš„`æ™®é€šåˆå§‹åŒ–å™¨`ï¼Œä¸ºæŒ‡å®šæˆå‘˜åé¢çš„æˆå‘˜æä¾›åˆå§‹å€¼ã€‚

- æŒ‡å®šæˆå‘˜çš„æœ€åä¸€æ¬¡èµ‹å€¼æ‰æ˜¯å®ƒå®é™…è·å¾—çš„å€¼ã€‚

### 4. ç»“æ„æ•°ç»„

#### 4.1 å£°æ˜ç»“æ„æ•°ç»„
å£°æ˜ç»“æ„æ•°ç»„å’Œå£°æ˜å…¶ä»–ç±»å‹çš„æ•°ç»„ç±»ä¼¼ã€‚
```cpp
/*æŠŠlibraryå£°æ˜ä¸ºä¸€ä¸ªå†…å«MAXBKSä¸ªå…ƒç´ çš„æ•°ç»„*/
struct book library[MAXBKS];
```
> æ•°ç»„ålibraryä¸æ˜¯ç»“æ„åï¼Œæ˜¯æ•°ç»„åã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯struct bookç±»å‹çš„ç»“æ„å˜é‡ã€‚

#### 4.2 æ ‡è¯†ç»“æ„æ•°ç»„çš„æˆå‘˜
ä¸ºäº†è¡¨ç¤ºç»“æ„æ•°ç»„ä¸­çš„æˆå‘˜ï¼Œé‡‡ç”¨è®¿é—®å•ç‹¬ç»“æ„çš„è§„åˆ™ï¼šåœ¨ç»“æ„ååé¢åŠ ä¸€ä¸ªç‚¹è¿ç®—ç¬¦ï¼Œå†åœ¨ç‚¹è¿ç®—ç¬¦åé¢åŠ ä¸Šæˆå‘˜åã€‚å¦‚ï¼š
```cpp
library[0].price  /*ç¬¬1ä¸ªæ•°ç»„å…ƒç´ ä¸priceç›¸å…³è”*/
library[4].title  /*ç¬¬5ä¸ªæ•°ç»„å…ƒç´ ä¸titleç›¸å…³è”*/
```
> âš ï¸æ³¨æ„ï¼š***æ•°ç»„ä¸‹æ ‡ç´§è·Ÿåœ¨æ•°ç»„åï¼ˆå¦‚libraryåé¢ï¼‰ï¼Œä¸æ˜¯æˆå‘˜ååé¢ã€‚***

#### 4.2 åµŒå¥—ç»“æ„
åµŒå¥—ç»“æ„ï¼šåœ¨ä¸€ä¸ªç»“æ„ä¸­åŒ…å«å¦ä¸€ä¸ªç»“æ„ã€‚
å¦‚æœè®¿é—®åµŒå¥—ç»“æ„çš„æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨ä¸¤æ¬¡ç‚¹è¿ç®—ç¬¦ã€‚
```cpp
#define _CRT_SECURE_NO_WARNINGS
#include<stdio.h>
#define LEN 20
const char * msgs[5] =
{
	" Thank you for the wonderful evening, ",
	"You certainly prove that a ",
	"is a special kind of guy. We must get together",
	"over a delicious ",
	" and have a few laughs"
};

struct names {
	char first[LEN];
	char last[LEN];
};
 
struct guy {
	struct names handle;  //åµŒå¥—ç»“æ„ï¼Œç»“æ„é‡ŒåŒ…å«å¦ä¸€ä¸ªç»“æ„
	char favfood[LEN];
	char job[LEN];
	float income;
};
 
int main(void)
{
	struct guy fellow = {
		{"Ewen", "Villard"},
		"grilled salmon",
		"personality coach",
		68112.00
	};
	printf("Dear %s,\n\n", fellow.handle.first); //ä½¿ç”¨åµŒå¥—ç»“æ„ï¼Œå…ˆä½¿ç”¨.å¾—åˆ°nameï¼Œå†.å¾—åˆ°first
	printf("%s%s.\n", msgs[0], fellow.handle.first); 
	printf("%s%s\n", msgs[1], fellow.job);
	printf("%s\n", msgs[2]);
	printf("%s%s%s", msgs[3], fellow.favfood, msgs[4]);
	if (fellow.income > 150000.0)
		puts("!!");
	else if (fellow.income > 75000.0)
		puts("!");
	else
		puts(".");
	printf("\n%40s%s\n", " ", "See you soon,");
	printf("%40s%s\n", " ", "Shalala");
 
	return 0;
}
```

### 5. æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆ
ä½¿ç”¨æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆçš„ç†ç”±ï¼š
- æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆé€šå¸¸æ˜¯ç»“æ„æœ¬èº«æ›´å®¹æ˜“æ“æ§ï¼ˆæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆæ¯”æ•°ç»„æœ¬èº«æ›´å®¹æ˜“æ“æ§ï¼‰ã€‚
- æ—©æœŸCå®ç°ï¼Œç»“æ„ä¸èƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œå¯ä»¥ä¼ é€’æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆã€‚
- èƒ½ä¼ é€’ä¸€ä¸ªç»“æ„ï¼Œä¼ é€’æŒ‡é’ˆé€šå¸¸æ›´æœ‰æ•ˆç‡ã€‚
- ä¸€äº›ç”¨äºè¡¨ç¤ºæ•°æ®çš„ç»“æ„ä¸­åŒ…å«æŒ‡å‘å…¶å®ƒç»“æ„çš„æŒ‡é’ˆã€‚

#### 5.1 å£°æ˜å’Œåˆå§‹åŒ–ç»“æ„æŒ‡é’ˆ
ä¾‹å­ï¼š
```cpp
struct guy *him;
```
ä¸æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œ~~ç»“æ„åå¹¶ä¸æ˜¯ç»“æ„çš„åœ°å€~~ï¼Œå› æ­¤åœ¨ç»“æ„åå‰åŠ ä¸Š`&è¿ç®—ç¬¦`ã€‚

#### 5.2 ç”¨æŒ‡é’ˆè®¿é—®æˆå‘˜
ä¸¤ç§æ–¹å¼ï¼š
- ä½¿ç”¨ `->` è¿ç®—ç¬¦
	- å¦‚æœ him==&barney ,é‚£ä¹ˆ him->income å³æ˜¯ barney.income
	- å¦‚æœ him==&fellow[0] , é‚£ä¹ˆ him->income å³æ˜¯ fellow [0].income


- ç”¨`è¿ç®—ç¬¦`ï¼ˆå¿…é¡»ä½¿ç”¨`åœ†æ‹¬å·`ï¼Œå› ä¸º`(.)è¿ç®—ç¬¦`æ¯”`(*)`è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é«˜ï¼‰ã€‚
```cpp
barney.income == (*him) . income == him->income //å‡è®¾him== &barney
fellow [0].income == (*him) .income
```
æœ‰äº›ç³»ç»Ÿï¼Œ**ä¸€ä¸ªç»“æ„çš„å¤§å°å¯èƒ½å¤§äºå®ƒå„æˆå‘˜å¤§å°ä¹‹å’Œ**ã€‚

### 6. å‘å‡½æ•°ä¼ é€’ç»“æ„çš„ä¿¡æ¯
å‡½æ•°çš„å‚æ•°æŠŠå€¼ï¼ˆéƒ½æ˜¯æ•°å­—---> intç±»å‹ï¼Œfloatç±»å‹ã€ASCIIå­—ç¬¦ç ã€åœ°å€ï¼‰ä¼ é€’ç»™å‡½æ•°ã€‚

#### 6.1 ä¼ é€’ç»“æ„æˆå‘˜
åªè¦ç»“æ„æˆå‘˜æ˜¯ä¸€ä¸ªå…·æœ‰å•ä¸ªå€¼çš„æ•°æ®ç±»å‹ï¼ˆå³intåŠå…¶ç›¸å…³ç±»å‹ã€charã€floatã€doubleæˆ–æŒ‡é’ˆï¼‰ï¼Œå¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ¥å—è¯¥ç‰¹å®šç±»å‹çš„å‡½æ•°ã€‚
```cpp
/*æŠŠç»“æ„æˆå‘˜ä½œä¸ºå‚æ•°ä¼ é€’*/
#include <stdio.h>
#define FUNDLEN 50

struct funds {
	char   bank[FUNDLEN];
	double bankfund;
	char   save[FUNDLEN];
	double savefund;
};

double sum(double, double);

int main(void)
{
	struct funds stan = {
		"Garlic-Melon Bank",
		4032.27,
		"Lucky's Savings and Loan",
		8543.94
	};

	printf("Stan has a total of $%.2f.\n",
		sum(stan.bankfund, stan.savefund));
	return 0;
}

/* adds two double numbers */
double sum(double x, double y)
{
	return(x + y);
}
```

#### 6.2 ä¼ é€’ç»“æ„çš„åœ°å€
å¿…é¡»ä½¿ç”¨`&è¿ç®—ç¬¦`æ¥è·å–`ç»“æ„çš„åœ°å€`ï¼Œç»“æ„ååªæ˜¯å…¶åœ°å€çš„åˆ«åã€‚






